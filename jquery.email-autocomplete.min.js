!function(t){t.fn.autoEmail=function(e,n,l){return this.each(function(){var r,s=t(this);n=n||e[0],s.keypress(function(i){var a=i.keyCode?i.keyCode:i.which?i.which:i.charCode,h=[8,9,17,18,35,36,37,38,39,40,45];if(!(h.indexOf(a)>=0)){i.preventDefault();var v=t(this)[0].selectionStart,o=t(this)[0].selectionEnd;if(r=t(this).val().length,/^(13|44|59)$/.test(""+a)){if(l){var u;v!=o?u=59==a?"; ":", ":13!=a&&(u=String.fromCharCode(a)),null!=u&&s.val(s.val().substr(0,o)+u+s.val().substr(o,s.val().length))}return s[0].selectionStart=o+(s.val().length-r),void(s[0].selectionEnd=o+(s.val().length-r))}s.val(s.val().substr(0,v)+String.fromCharCode(a)+s.val().substr(o,s.val().length)),r=t(this).val().length-r,s[0].selectionStart=++v,s[0].selectionEnd=o+r;var g,c=t(this).val().substr(0,v).split("@");if(c.length<2||""==c[0]){if(!(s.val().indexOf("@")==-1||v<o))return;g="",f=[n]}else{g=c[c.length-1];var f=t.grep(e,function(t,e){return g===t.substr(0,g.length)})}if(f.length>0){var d=f[0].substr(g.length,f[0].length);s.val(s.val().substr(0,v)+(c.length<2?"@":"")+d),s[0].selectionStart=v,s[0].selectionEnd=v+d.length+(c.length<2?1:0)}}})})}}(jQuery);